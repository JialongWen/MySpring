Mybatis
======
手写一部分Mybatis(ORM框架）
-------
[第一部分](https://github.com/JialongWen/connectionPool.git)
--------
### 手写数据库连接池
#### 实现思路和内容
#### 核心参数
* 空闲线程（连接）容器 存放为使用的线程
* 活动线程（正在使用的连接）
* 最大连接数
#### 核心步骤：
* 1.初始化线程池（初始化空闲线程）
* 2.调用getConnection方法----获取连接请求<br>
    2.1 先去空闲集合获取当前连接，存放在activeConnection(活动连接)
* 3.调用releaseConnetion方法-----释放掉连接<br>
    3.1 获取到活动连接集合连接，转移到freeconnection集合中(当然我们也要判断空闲是否已经到达最大)
#### 操作步骤
* 初始化连接池(将最小值数的连接数创建出来放到空闲线程里面)
* 获取连接getConnection <br>
具体注意事项请看代码注释
* 释放连接releaseConnetion

#### 一些细节问题
* 内部对异常的处理我认为应该是往外抛出的这样有利于使用者收集错误信息进行自己的日志记录<br>
但是本次我没有这么做,主要是为了测试方便。
* 其他问题均记录在代码注释中

第二部分
--------
### 手写mybatis（注解版本）
#### 难点
* 1.接口无法被实例化，该如何实现调用接口
* 2.参数如何和sql参数绑定
* 3.返回结果
#### 实现方式
##### 动态代理模式来帮我们虚拟调用
* 将所有的操作流程封装到动态代理类中来执行,我们获取到的返回值实际上就是动态代理类返回的结果
* 参数我们通过一个map来绑定属性名称和属性之间的关系，获取到每一个属性上的注解<br>
  并且获取到对应位置的参数值封装到map中
* 这里要注意的是如果参数是单个的或者是pojo我们就没有必要去获取他的注解了直接存对应的<br>
  参数名称和参数值就可以了
* 得到之后我们通过解析增删改查注解上的字符串来获的我们需要的属性的名称,获取到的属性名称去map<br>
  里找到对应的属性将他们添加到执行参数列表中!!!注意这里是有序的
* 之后我们就将sql字符串中的#{} 或者${}(但是本次我没有去操作$符号）替换成?
* 将两者交给封装好的jdbc工具类去执行并且返回结果

#### 需要注意问题
* 1.这里我没有去考虑mybatis是如何在没有@ResultType的情况下得知List<T>情况下的List中的泛型的(也有可能mybatis使用了字节码技术）
* 2.这里我没有考虑到线程安全的问题并没有使用线程安全的集合，实际上我在这里使用ArrayList是不正确的
* 3.这里没有去考虑性能的问题，比如代码注释中提到的if或者是switch到底如何使用我并没有去考虑
* 4.这里我只写了增和查实际上增删改操作是基本一致的,并不用考虑返回值的问题,而查询则需要单独考虑返回值的问题
    <br>
    `如果您发现有其他问题或者您对我有什么改进的意见欢迎在下方留言或者发送到我的邮箱631488786@qq.com`
